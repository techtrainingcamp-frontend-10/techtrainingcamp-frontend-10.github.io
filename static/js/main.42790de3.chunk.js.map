{"version":3,"sources":["views/Home/Top/index.module.scss","components/LivePlayer/Top/index.module.scss","mock/api.ts","utils/request/index.ts","components/Player/index.tsx","components/VideoPlayer/index.tsx","views/Home/Top/index.tsx","views/Home/index.tsx","api/video.ts","components/LivePlayer/Top/index.tsx","components/LivePlayer/index.tsx","views/Live/index.tsx","api/live.ts","App.tsx","reportWebVitals.ts","index.tsx","components/VideoPlayer/index.module.scss"],"names":["module","exports","console","log","Mock","setup","timeout","Random","extend","tags","arr","count","temp","index","shuffled","slice","i","length","min","Math","floor","random","getRandomArrayElements","url","mock","increment","pick","http","defaults","baseURL","process","require","interceptors","request","use","config","error","Promise","reject","response","Player","player","this","props","type","id","XGPlayer","width","window","innerWidth","height","innerHeight","autoplay","videoInit","playsinline","loop","closeVideoStopPropagation","closePlayVideoFocus","ignores","HlsPlayer","controls","active","initPlayer","destroy","className","classNames","React","Component","VideoPlayer","video","author","description","tagList","likes","comments","styles","toString","info","map","tagName","tag","action","like","comment","Top","top","left","to","middle","navbar","right","Home","handleSwiperChange","swiper","state","videoList","inPageVideoList","activeIndex","setState","update","get","res","data","spaceBetween","slidesPerView","direction","onSlideChange","autoHeight","LivePlayer","Live","liveList","live","BasicExample","exact","path","component","reportWebVitals","onPerfEntry","Function","then","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"gGACAA,EAAOC,QAAU,CAAC,IAAM,iBAAiB,KAAO,kBAAkB,OAAS,oBAAoB,OAAS,oBAAoB,cAAc,yBAAyB,qBAAqB,gCAAgC,MAAQ,mBAAmB,aAAa,0B,mBCAhQD,EAAOC,QAAU,CAAC,IAAM,iBAAiB,MAAQ,mBAAmB,YAAY,yB,qDCDhF,4BAEAC,QAAQC,IAAI,gBAEZC,IAAKC,MAAM,CACTC,QAAS,YAcXC,SAAOC,OAAO,CAEZC,KAAM,WAGJ,OAhBJ,SAAiCC,EAAiBC,GAEhD,IADA,IAA8EC,EAAUC,EAAlFC,EAAWJ,EAAIK,MAAM,GAAQC,EAAIN,EAAIO,OAAcC,EAAMF,EAAIL,EAC5DK,KAAME,GAEXN,EAAOE,EADPD,EAAQM,KAAKC,OAAOJ,EAAI,GAAKG,KAAKE,WAElCP,EAASD,GAASC,EAASE,GAC3BF,EAASE,GAAKJ,EAEhB,OAAOE,EAASC,MAAMG,GAQbI,CADM,CAAC,oDAAa,oDAAa,oDAAa,qDACjBH,KAAKC,MAAM,EAAoB,EAAhBD,KAAKE,cAI5D,IAAME,EACU,mBADVA,EAES,kBAGfnB,IAAKoB,KAAKD,EAAkB,CAC1B,cAAe,CAAC,CACd,QAAShB,SAAOkB,YAChB,WAAY,CAAC,qBAAO,qBAAO,2BAAQ,2BAAQ,sBAC3C,QAASlB,SAAOmB,KAAK,CACnB,gGAEF,gBAAiBnB,SAAOmB,KAAK,CAC3B,uFACA,6CACA,+FAEF,YAAa,CAAC,SACd,kBAAmB,IACnB,qBAAsB,QAI1BtB,IAAKoB,KAAKD,EAAiB,CACzB,aAAc,CAAC,CACb,QAAShB,SAAOkB,YAChB,WAAY,CAAC,qBAAO,qBAAO,2BAAQ,2BAAQ,sBAC3C,QAASlB,SAAOmB,KAAK,CACnB,sFAEF,gBAAiBnB,SAAOmB,KAAK,CAC3B,uFACA,6CACA,+FAEF,YAAa,CAAC,SACd,kBAAmB,IACnB,qBAAsB,S,uPC/D1BC,IAAKC,SAASC,QAAUC,wBAGxBC,EAAQ,IAIRJ,IAAKK,aAAaC,QAAQC,KAAI,SAAUC,GACtC,OAAOA,KACN,SAAUC,GACX,OAAOC,QAAQC,OAAOF,MAIxBT,IAAKK,aAAaO,SAASL,KAAI,SAAUK,GACvC,OAAOA,KACN,SAAUH,GACX,OAAOC,QAAQC,OAAOF,MAGTT,QAAf,E,2ECyEea,E,4MA7EbC,Y,6DAEe,IAAD,EACcC,KAAKC,MAAvBC,EADI,EACJA,KAAMC,EADF,EACEA,GAAItB,EADN,EACMA,IAEL,UAATqB,EACFF,KAAKD,OAAS,IAAIK,IAAS,CACzBD,GAAG,GAAD,OAAKD,GAAL,OAAYC,GACdE,MAAOC,OAAOC,WACdC,OAAQF,OAAOG,YACf5B,IAAKA,EACL6B,UAAU,EACVC,WAAW,EACX,uBAAwB,KACxBC,aAAa,EACbC,MAAM,EACNC,2BAA2B,EAC3BC,qBAAqB,EACrBC,QAAS,CAAC,OAAQ,aAAc,QAAS,aAAc,OAAQ,KAAM,OAAQ,SAAU,YAEvE,SAATd,IACTF,KAAKD,OAAS,IAAIkB,IAAU,CAC1Bd,GAAIA,EACJE,MAAOC,OAAOC,WACdC,OAAQF,OAAOG,YACf5B,IAAKA,EACL6B,UAAU,EACVC,WAAW,EACXO,UAAU,EACV,uBAAwB,KACxBN,aAAa,EACbE,2BAA2B,EAC3BC,qBAAqB,EACrBC,QAAS,CAAC,OAAQ,aAAc,QAAS,aAAc,OAAQ,UAAW,SAAU,KAAM,OAAQ,SAAU,WAAY,SAAU,aAItIxD,QAAQC,IAAR,WAAgB0C,EAAhB,oBAAsCH,KAAKD,U,0CAIxBC,KAAKC,MAAhBkB,QAGNnB,KAAKoB,e,2CAIc,IAAD,EACGpB,KAAKC,MAApBE,EADY,EACZA,GAAIgB,EADQ,EACRA,OAEZ3D,QAAQC,IAAR,WAAgB0C,EAAhB,qBAAuCH,KAAKD,OAAQoB,GAEhDA,EACGnB,KAAKD,QACRC,KAAKoB,aAGHpB,KAAKD,SACPC,KAAKD,OAAOsB,iBACLrB,KAAKD,OACZvC,QAAQC,IAAR,WAAgB0C,EAAhB,uBAAyCH,KAAKD,W,+BAKzC,IAAD,EACaC,KAAKC,MAAlBE,EADA,EACAA,GAAID,EADJ,EACIA,KAEZ,OACE,qBAAKoB,UAAWC,IAAW,SAAU,CAAE,eAAyB,UAATrB,EAAkB,cAAwB,SAATA,IAAxF,SACE,qBAAKC,GAAE,UAAKD,GAAL,OAAYC,W,GAxENqB,IAAMC,WCiCZC,E,uKAnCF,IAAD,EAC2D1B,KAAKC,MAAM0B,MAAtExB,EADA,EACAA,GAAItB,EADJ,EACIA,IAAK+C,EADT,EACSA,OAAQC,EADjB,EACiBA,YAAaC,EAD9B,EAC8BA,QAASC,EADvC,EACuCA,MAAOC,EAD9C,EAC8CA,SAC9Cb,EAAWnB,KAAKC,MAAhBkB,OAER,OACE,sBAAKG,UAAWC,IAAWU,IAAON,MAAO,CAAE,eAAgBR,IAA3D,UACE,cAAC,EAAD,CAAQhB,GAAIA,EAAG+B,WAAYrD,IAAKA,EAAKqB,KAAK,QAAQiB,OAAQA,IAC1D,sBAAKG,UAAWW,IAAOE,KAAvB,UACE,sBAAKb,UAAWW,IAAOL,OAAvB,cACIA,KAEJ,qBAAKN,UAAWW,IAAOJ,YAAvB,SACGA,IAEH,qBAAKP,UAAWW,IAAOlE,KAAvB,SACG+D,GAAWA,EAAQM,KAAI,SAAAC,GACtB,OAAQ,uBAAMf,UAAWW,IAAOK,IAAxB,cAA6CD,IAAXA,WAIhD,sBAAKf,UAAWW,IAAOM,OAAvB,UACE,sBAAKjB,UAAWW,IAAOO,KAAvB,UACE,qBAAKlB,UAAWW,IAAO,eACvB,qBAAKX,UAAWW,IAAO,eAAvB,SAAwCF,OAE1C,sBAAKT,UAAWW,IAAOQ,QAAvB,UACE,qBAAKnB,UAAWW,IAAO,kBACvB,qBAAKX,UAAWW,IAAO,kBAAvB,SAA2CD,iB,GA5B7BR,IAAMC,W,iBCoBjBiB,E,uKAtBX,OACE,sBAAKpB,UAAWW,IAAOU,IAAvB,UACE,qBAAKrB,UAAWW,IAAOW,KAAvB,SACE,cAAC,IAAD,CAAMC,GAAG,QAAT,SACE,qBAAKvB,UAAU,WAAf,8BAGJ,qBAAKA,UAAWW,IAAOa,OAAvB,SACE,sBAAKxB,UAAWW,IAAOc,OAAvB,UACE,qBAAKzB,UAAWW,IAAO,eAAvB,0BACA,qBAAKX,UAAWW,IAAO,eAAvB,0BACA,qBAAKX,UAAS,UAAKW,IAAO,eAAZ,YAA8BA,IAAO,uBAAnD,+BAGJ,qBAAKX,UAAWW,IAAOe,MAAvB,SACE,qBAAK1B,UAAWW,IAAO,yB,GAjBfT,IAAMC,W,wBCqFTwB,G,wDAzEb,WAAahD,GAAgB,IAAD,8BAC1B,cAAMA,IAyBRiD,mBAAqB,SAACC,GACpB3F,QAAQC,IAAI0F,GADgC,MAEL,EAAKC,MAApCC,EAFoC,EAEpCA,UAAWC,EAFyB,EAEzBA,gBACXC,EAAgBJ,EAAhBI,YACJA,IAAgBD,EAAgB/E,OAAS,GAAKgF,EAAcF,EAAU9E,OAAS,IACjFf,QAAQC,IAAI,SACZ,EAAK+F,SAAS,CACZF,gBAAgB,GAAD,mBAAMA,GAAN,CAAuBD,EAAUE,EAAc,OAEhEJ,EAAOM,UAETjG,QAAQC,IAAI,iBAAkB8F,GAC9B,EAAKC,SAAS,CACZD,YAAaA,KApCf,EAAKH,MAAQ,CACXC,UAAW,GACXC,gBAAiB,GACjBC,YAAa,GANW,E,2MCnBrBhE,EAAQmE,IAAI,iB,OD+BTC,E,OACAN,EAA2BM,EAAIC,KAAKP,UAC1CrD,KAAKwD,SAAS,CACZH,cAEFrD,KAAKwD,SAAS,CACZF,gBAAiBD,EAAUhF,MAAM,EAAG,KAEtCb,QAAQC,IAAIuC,KAAKoD,O,kDAEjB5F,QAAQC,IAAR,M,+IAqBO,IAAD,SACiCuC,KAAKoD,MAAtCE,EADA,EACAA,gBAAiBC,EADjB,EACiBA,YAEzB,OACE,sBAAKjC,UAAU,OAAf,UACE,cAAC,EAAD,IACCgC,GAAmBA,EAAgB/E,QAClC,cAAC,IAAD,CACEsF,aAAc,EACdC,cAAe,EACfC,UAAU,WACVC,cAAe,SAACb,GAAD,OAAY,EAAKD,mBAAmBC,IAGnD3C,OAAQF,OAAOG,YACfwD,YAAU,EARZ,SAUGX,EAAgBlB,KAAI,SAACT,EAAOxD,GAC3B,OACE,cAAC,IAAD,UACE,cAAC,EAAD,CAAawD,MAAOA,EAAOR,OAAQoC,IAAgBpF,KADnCwD,EAAMxB,gB,GA/DrBqB,IAAMC,Y,yBEKViB,E,uKAdX,OACE,sBAAKpB,UAAWW,IAAOU,IAAvB,UACE,qBAAKrB,UAAWW,IAAOW,OACvB,qBAAKtB,UAAWW,IAAOa,SACvB,qBAAKxB,UAAWW,IAAOe,MAAvB,SACE,cAAC,IAAD,CAAMH,GAAG,IAAT,SACE,qBAAKvB,UAAWW,IAAO,0B,GARjBT,IAAMC,WCgBTyC,E,uKAZF,IAAD,EACYlE,KAAKC,MAAM0B,MAAvBxB,EADA,EACAA,GAAItB,EADJ,EACIA,IAEZ,OACE,sBAAKyC,UAAU,OAAf,UACE,cAAC,EAAD,IACA,cAAC,EAAD,CAAQnB,GAAIA,EAAG+B,WAAYrD,IAAKA,EAAKqB,KAAK,gB,GAPzBsB,IAAMC,WC+BhB0C,E,kDA/Bb,WAAalE,GAAgB,IAAD,8BAC1B,cAAMA,IAEDmD,MAAQ,CACXgB,SAAU,IAJc,E,yMCVrB7E,EAAQmE,IAAI,gB,ODoBTC,E,OACNnG,QAAQC,IAAIkG,GACZ3D,KAAKwD,SAAS,CACZY,SAAUT,EAAIC,KAAKQ,W,gDAGrB5G,QAAQC,IAAR,M,8IAKF,IAAM4G,EAAOrE,KAAKoD,MAAMgB,SAAS,GAEjC,OACE,qBAAK9C,UAAU,OAAf,SACG+C,GAAQ,cAAC,EAAD,CAAY1C,MAAO0C,U,GA1BjB7C,IAAMC,WEMV,SAAS6C,IACtB,OACE,cAAC,IAAD,UACE,8BAQE,eAAC,IAAD,WACE,cAAC,IAAD,CAAOC,OAAK,EAACC,KAAK,IAAIC,UAAWxB,IACjC,cAAC,IAAD,CAAOuB,KAAK,QAAQC,UAAWN,WC7BzC,IAYeO,EAZS,SAACC,GACnBA,GAAeA,aAAuBC,UACxC,6BAAqBC,MAAK,YAAkD,IAA/CC,EAA8C,EAA9CA,OAAQC,EAAsC,EAAtCA,OAAQC,EAA8B,EAA9BA,OAAQC,EAAsB,EAAtBA,OAAQC,EAAc,EAAdA,QAC3DJ,EAAOH,GACPI,EAAOJ,GACPK,EAAOL,GACPM,EAAON,GACPO,EAAQP,OCHdQ,IAASC,OACP,cAAC,IAAMC,WAAP,UACE,cAAC,EAAD,MAEFC,SAASC,eAAe,SAM1Bb,K,kBCfApH,EAAOC,QAAU,CAAC,MAAQ,2BAA2B,KAAO,0BAA0B,OAAS,4BAA4B,YAAc,iCAAiC,KAAO,0BAA0B,IAAM,yBAAyB,OAAS,4BAA4B,KAAO,0BAA0B,QAAU,6BAA6B,YAAY,+BAA+B,eAAe,kCAAkC,cAAc,iCAAiC,iBAAiB,uC","file":"static/js/main.42790de3.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"top\":\"Top_top__2SUpi\",\"left\":\"Top_left__J0r90\",\"middle\":\"Top_middle__3q9H9\",\"navbar\":\"Top_navbar__3WGJx\",\"navbar-item\":\"Top_navbar-item__2ttu1\",\"navbar-item-active\":\"Top_navbar-item-active__1lry4\",\"right\":\"Top_right__2enh6\",\"search-btn\":\"Top_search-btn__1BQUW\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"top\":\"Top_top__2Q1jJ\",\"right\":\"Top_right__1kyh_\",\"close-btn\":\"Top_close-btn__kLbgi\"};","import Mock, { Random } from 'mockjs'\n\nconsole.log('mockjs start')\n\nMock.setup({\n  timeout: '200-600' // 设置响应时间\n})\n\nfunction getRandomArrayElements (arr: Array<any>, count: number) {\n  const shuffled = arr.slice(0); let i = arr.length; const min = i - count; let temp; let index\n  while (i-- > min) {\n    index = Math.floor((i + 1) * Math.random())\n    temp = shuffled[index]\n    shuffled[index] = shuffled[i]\n    shuffled[i] = temp\n  }\n  return shuffled.slice(min)\n}\n\nRandom.extend({\n  // 自定义占位符名字tags\n  tags: function () {\n    // 随机选择1-4个作为返回值\n    const tags = ['一个普通公司的8年', '一个普通公司的7年', '一个普通公司的6年', '一个普通公司的5年']\n    return getRandomArrayElements(tags, Math.floor(1 + Math.random() * 4))\n  }\n})\n\nconst url = {\n  getVideoList: /.*\\/getVideoList/,\n  getLiveList: /.*\\/getLiveList/\n}\n\nMock.mock(url.getVideoList, {\n  'videoList|5': [{\n    'id|+1': Random.increment(),\n    'author|1': ['字节君', '蛤蛤蛤', '肆无忌惮', '摩天大楼', '初学者'],\n    'url|1': Random.pick([\n      'https://sf1-hscdn-tos.pstatp.com/obj/media-fe/xgplayer_doc_video/mp4/xgplayer-demo-360p.mp4'\n    ]),\n    'description|1': Random.pick([\n      '字节跳动8周年，不忘初心，Always Day1',\n      '哈哈哈测试测试',\n      '苟利国家生死以，岂因祸福避趋之'\n    ]),\n    'tagList|1': ['@tags'],\n    'likes|100-10000': 10000,\n    'comments|100-10000': 10000\n  }]\n})\n\nMock.mock(url.getLiveList, {\n  'liveList|5': [{\n    'id|+1': Random.increment(),\n    'author|1': ['字节君', '蛤蛤蛤', '肆无忌惮', '摩天大楼', '初学者'],\n    'url|1': Random.pick([\n      '//sf1-hscdn-tos.pstatp.com/obj/media-fe/xgplayer_doc_video/hls/xgplayer-demo.m3u8'\n    ]),\n    'description|1': Random.pick([\n      '字节跳动8周年，不忘初心，Always Day1',\n      '哈哈哈测试测试',\n      '苟利国家生死以，岂因祸福避趋之'\n    ]),\n    'tagList|1': ['@tags'],\n    'likes|100-10000': 10000,\n    'comments|100-10000': 10000\n  }]\n})\n","import http from 'axios'\n\nhttp.defaults.baseURL = process.env.REACT_APP_API\n\n// if (process.env.NODE_ENV === 'development') {\nrequire('../../mock/api')\n// }\n\n// 请求拦截器\nhttp.interceptors.request.use(function (config) {\n  return config\n}, function (error) {\n  return Promise.reject(error)\n})\n\n// 响应拦截器\nhttp.interceptors.response.use(function (response) {\n  return response\n}, function (error) {\n  return Promise.reject(error)\n})\n\nexport default http\n","import React from 'react'\nimport XGPlayer from 'xgplayer'\nimport HlsPlayer from 'xgplayer-hls'\n// import DPlayer from 'dplayer'\nimport './index.scss'\nimport classNames from 'classnames'\n\ninterface IProps {\n  type: 'video'|'live';\n  id: string;\n  url: string;\n  active?: boolean;\n}\n\ninterface IState {\n}\n\nclass Player extends React.Component<IProps, IState> {\n  player: XGPlayer | undefined\n\n  initPlayer () {\n    const { type, id, url } = this.props\n\n    if (type === 'video') {\n      this.player = new XGPlayer({\n        id: `${type}${id}`,\n        width: window.innerWidth,\n        height: window.innerHeight,\n        url: url,\n        autoplay: true,\n        videoInit: true,\n        'x5-video-player-type': 'h5',\n        playsinline: false,\n        loop: true,\n        closeVideoStopPropagation: true, // 允许事件冒泡\n        closePlayVideoFocus: true, // 关闭自动 focus（与 swiperjs 冲突）\n        ignores: ['time', 'definition', 'error', 'fullscreen', 'i18n', 'pc', 'play', 'replay', 'volume']\n      })\n    } else if (type === 'live') {\n      this.player = new HlsPlayer({\n        id: id,\n        width: window.innerWidth,\n        height: window.innerHeight,\n        url: url,\n        autoplay: true,\n        videoInit: true,\n        controls: false,\n        'x5-video-player-type': 'h5',\n        playsinline: false,\n        closeVideoStopPropagation: true,\n        closePlayVideoFocus: true,\n        ignores: ['time', 'definition', 'error', 'fullscreen', 'i18n', 'loading', 'mobile', 'pc', 'play', 'poster', 'progress', 'replay', 'volume']\n      })\n    }\n\n    console.log(`[${id}] Player inited.`, this.player)\n  }\n\n  componentDidMount () {\n    const { active } = this.props\n\n    if (active) {\n      this.initPlayer()\n    }\n  }\n\n  componentDidUpdate () {\n    const { id, active } = this.props\n\n    console.log(`[${id}] Player updated.`, this.player, active)\n\n    if (active) {\n      if (!this.player) {\n        this.initPlayer()\n      }\n    } else {\n      if (this.player) {\n        this.player.destroy()\n        delete this.player\n        console.log(`[${id}] Player destroyed.`, this.player)\n      }\n    }\n  }\n\n  render () {\n    const { id, type } = this.props\n\n    return (\n      <div className={classNames('player', { 'player-video': type === 'video', 'player-live': type === 'live' })}>\n        <div id={`${type}${id}`} />\n      </div>\n    )\n  }\n}\n\nexport default Player\n","import React from 'react'\nimport styles from './index.module.scss'\nimport Player from '../Player'\nimport { IVideo } from '../../types/video'\nimport classNames from 'classnames'\n\ninterface IProps {\n  video: IVideo;\n  active?: boolean;\n}\n\ninterface IState {\n}\n\nclass VideoPlayer extends React.Component<IProps, IState> {\n  render () {\n    const { id, url, author, description, tagList, likes, comments } = this.props.video\n    const { active } = this.props\n\n    return (\n      <div className={classNames(styles.video, { 'video-avtice': active })}>\n        <Player id={id.toString()} url={url} type='video' active={active} />\n        <div className={styles.info}>\n          <div className={styles.author}>\n            @{author}\n          </div>\n          <div className={styles.description}>\n            {description}\n          </div>\n          <div className={styles.tags}>\n            {tagList && tagList.map(tagName => {\n              return (<span className={styles.tag} key={tagName}>#{tagName}</span>)\n            })}\n          </div>\n        </div>\n        <div className={styles.action}>\n          <div className={styles.like}>\n            <div className={styles['like-icon']} />\n            <div className={styles['like-number']}>{likes}</div>\n          </div>\n          <div className={styles.comment}>\n            <div className={styles['comment-icon']} />\n            <div className={styles['comment-number']}>{comments}</div>\n          </div>\n        </div>\n      </div>\n    )\n  }\n}\n\nexport default VideoPlayer\n","import React from 'react'\nimport { Link } from 'react-router-dom'\nimport styles from './index.module.scss'\n\ninterface IProps {\n}\n\ninterface IState {\n}\n\nclass Top extends React.Component<IProps, IState> {\n  render () {\n    return (\n      <div className={styles.top}>\n        <div className={styles.left}>\n          <Link to='/live'>\n            <div className='live-btn'>直播</div>\n          </Link>\n        </div>\n        <div className={styles.middle}>\n          <div className={styles.navbar}>\n            <div className={styles['navbar-item']}>同城</div>\n            <div className={styles['navbar-item']}>关注</div>\n            <div className={`${styles['navbar-item']} ${styles['navbar-item-active']}`}>推荐</div>\n          </div>\n        </div>\n        <div className={styles.right}>\n          <div className={styles['search-btn']} />\n        </div>\n      </div>\n    )\n  }\n}\n\nexport default Top\n","import React from 'react'\n// import { Link } from 'react-router-dom'\nimport { getVideoList } from '../../api/video'\nimport VideoPlayer from '../../components/VideoPlayer'\nimport { IVideo } from '../../types/video'\nimport Top from './Top'\nimport './index.scss'\n\nimport { Swiper, SwiperSlide } from 'swiper/react'\nimport SwiperClass from 'swiper/types/swiper-class'\nimport 'swiper/swiper.scss'\n\ninterface IProps {\n}\n\ninterface IState {\n  videoList: Array<IVideo>;\n  inPageVideoList: Array<IVideo>;\n  activeIndex: number;\n}\n\nclass Home extends React.Component<IProps, IState> {\n  constructor (props: IProps) {\n    super(props)\n\n    this.state = {\n      videoList: [],\n      inPageVideoList: [],\n      activeIndex: 0\n    }\n  }\n\n  async componentDidMount () {\n    try {\n      const res = await getVideoList()\n      const videoList: Array<IVideo> = res.data.videoList\n      this.setState({\n        videoList\n      })\n      this.setState({\n        inPageVideoList: videoList.slice(0, 2)\n      })\n      console.log(this.state)\n    } catch (e) {\n      console.log(e)\n    }\n  }\n\n  handleSwiperChange = (swiper: SwiperClass) => {\n    console.log(swiper)\n    const { videoList, inPageVideoList } = this.state\n    const { activeIndex } = swiper\n    if (activeIndex === inPageVideoList.length - 1 && activeIndex < videoList.length - 1) {\n      console.log('added')\n      this.setState({\n        inPageVideoList: [...inPageVideoList, videoList[activeIndex + 1]]\n      })\n      swiper.update()\n    }\n    console.log('Active swiper:', activeIndex)\n    this.setState({\n      activeIndex: activeIndex\n    })\n  }\n\n  render () {\n    const { inPageVideoList, activeIndex } = this.state\n\n    return (\n      <div className='home'>\n        <Top />\n        {inPageVideoList && inPageVideoList.length &&\n          <Swiper\n            spaceBetween={0}\n            slidesPerView={1}\n            direction='vertical'\n            onSlideChange={(swiper) => this.handleSwiperChange(swiper)}\n            // onTouchStart={() => { console.log('onTouchStart') }}\n            // onTouchMove={() => { console.log('onTouchMove') }}\n            height={window.innerHeight}\n            autoHeight\n          >\n            {inPageVideoList.map((video, index) => {\n              return (\n                <SwiperSlide key={video.id}>\n                  <VideoPlayer video={video} active={activeIndex === index} />\n                </SwiperSlide>\n              )\n            })}\n          </Swiper>}\n      </div>\n    )\n  }\n}\n\nexport default Home\n","import request from '../utils/request'\n\nexport const getVideoList = () => {\n  return request.get('/getVideoList')\n}\n","import React from 'react'\nimport { Link } from 'react-router-dom'\nimport styles from './index.module.scss'\n\ninterface IProps {\n}\n\ninterface IState {\n}\n\nclass Top extends React.Component<IProps, IState> {\n  render () {\n    return (\n      <div className={styles.top}>\n        <div className={styles.left} />\n        <div className={styles.middle} />\n        <div className={styles.right}>\n          <Link to='/'>\n            <div className={styles['close-btn']} />\n          </Link>\n        </div>\n      </div>\n    )\n  }\n}\n\nexport default Top\n","import React from 'react'\nimport './index.scss'\nimport Player from '../Player'\nimport { IVideo } from '../../types/video'\nimport Top from './Top'\n\ninterface IProps {\n  video: IVideo;\n}\n\ninterface IState {\n}\n\nclass LivePlayer extends React.Component<IProps, IState> {\n  render () {\n    const { id, url } = this.props.video\n\n    return (\n      <div className='live'>\n        <Top />\n        <Player id={id.toString()} url={url} type='live' />\n      </div>\n    )\n  }\n}\n\nexport default LivePlayer\n","import React from 'react'\nimport { getLiveList } from '../../api/live'\nimport LivePlayer from '../../components/LivePlayer'\nimport { IVideo } from '../../types/video'\n\ninterface IProps {\n}\n\ninterface IState {\n  liveList: Array<IVideo>;\n}\n\nclass Live extends React.Component<IProps, IState> {\n  constructor (props: IProps) {\n    super(props)\n\n    this.state = {\n      liveList: []\n    }\n  }\n\n  async componentDidMount () {\n    try {\n      const res = await getLiveList()\n      console.log(res)\n      this.setState({\n        liveList: res.data.liveList\n      })\n    } catch (e) {\n      console.log(e)\n    }\n  }\n\n  render () {\n    const live = this.state.liveList[0]\n\n    return (\n      <div className='live'>\n        {live && <LivePlayer video={live} />}\n      </div>\n    )\n  }\n}\n\nexport default Live\n","import request from '../utils/request'\n\nexport const getLiveList = () => {\n  return request.get('/getLiveList')\n}\n","import {\n  BrowserRouter as Router,\n  Switch,\n  Route\n} from 'react-router-dom'\n\nimport Home from './views/Home/index'\nimport Live from './views/Live/index'\n\n// This site has 3 pages, all of which are rendered\n// dynamically in the browser (not server rendered).\n//\n// Although the page does not ever refresh, notice how\n// React Router keeps the URL up to date as you navigate\n// through the site. This preserves the browser history,\n// making sure things like the back button and bookmarks\n// work properly.\n\nexport default function BasicExample () {\n  return (\n    <Router>\n      <div>\n        {/*\n          A <Switch> looks through all its children <Route>\n          elements and renders the first one whose path\n          matches the current URL. Use a <Switch> any time\n          you have multiple routes, but you want only one\n          of them to render at a time\n        */}\n        <Switch>\n          <Route exact path='/' component={Home} />\n          <Route path='/live' component={Live} />\n        </Switch>\n      </div>\n    </Router>\n  )\n}\n","import { ReportHandler } from 'web-vitals'\n\nconst reportWebVitals = (onPerfEntry?: ReportHandler) => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry)\n      getFID(onPerfEntry)\n      getFCP(onPerfEntry)\n      getLCP(onPerfEntry)\n      getTTFB(onPerfEntry)\n    })\n  }\n}\n\nexport default reportWebVitals\n","import React from 'react'\nimport ReactDOM from 'react-dom'\nimport './index.scss'\nimport App from './App'\nimport reportWebVitals from './reportWebVitals'\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n)\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals()\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"video\":\"VideoPlayer_video__1x-26\",\"info\":\"VideoPlayer_info__p_zeF\",\"author\":\"VideoPlayer_author__2x-K0\",\"description\":\"VideoPlayer_description__2OJV5\",\"tags\":\"VideoPlayer_tags__32zlE\",\"tag\":\"VideoPlayer_tag__2jhPO\",\"action\":\"VideoPlayer_action__2CI0w\",\"like\":\"VideoPlayer_like__IG_uM\",\"comment\":\"VideoPlayer_comment__se77N\",\"like-icon\":\"VideoPlayer_like-icon__37QMd\",\"comment-icon\":\"VideoPlayer_comment-icon__2VFvh\",\"like-number\":\"VideoPlayer_like-number__1cJSx\",\"comment-number\":\"VideoPlayer_comment-number__K0paH\"};"],"sourceRoot":""}