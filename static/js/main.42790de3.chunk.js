(this["webpackJsonpmy-tiktok"]=this["webpackJsonpmy-tiktok"]||[]).push([[0],{15:function(e,t,i){e.exports={top:"Top_top__2SUpi",left:"Top_left__J0r90",middle:"Top_middle__3q9H9",navbar:"Top_navbar__3WGJx","navbar-item":"Top_navbar-item__2ttu1","navbar-item-active":"Top_navbar-item-active__1lry4",right:"Top_right__2enh6","search-btn":"Top_search-btn__1BQUW"}},20:function(e,t,i){e.exports={top:"Top_top__2Q1jJ",right:"Top_right__1kyh_","close-btn":"Top_close-btn__kLbgi"}},48:function(e,t,i){},68:function(e,t,i){"use strict";i.r(t);var n=i(14),a=i.n(n);console.log("mockjs start"),a.a.setup({timeout:"200-600"}),n.Random.extend({tags:function(){return function(e,t){for(var i,n,a=e.slice(0),c=e.length,o=c-t;c-- >o;)i=a[n=Math.floor((c+1)*Math.random())],a[n]=a[c],a[c]=i;return a.slice(o)}(["\u4e00\u4e2a\u666e\u901a\u516c\u53f8\u76848\u5e74","\u4e00\u4e2a\u666e\u901a\u516c\u53f8\u76847\u5e74","\u4e00\u4e2a\u666e\u901a\u516c\u53f8\u76846\u5e74","\u4e00\u4e2a\u666e\u901a\u516c\u53f8\u76845\u5e74"],Math.floor(1+4*Math.random()))}});var c=/.*\/getVideoList/,o=/.*\/getLiveList/;a.a.mock(c,{"videoList|5":[{"id|+1":n.Random.increment(),"author|1":["\u5b57\u8282\u541b","\u86e4\u86e4\u86e4","\u8086\u65e0\u5fcc\u60ee","\u6469\u5929\u5927\u697c","\u521d\u5b66\u8005"],"url|1":n.Random.pick(["https://sf1-hscdn-tos.pstatp.com/obj/media-fe/xgplayer_doc_video/mp4/xgplayer-demo-360p.mp4"]),"description|1":n.Random.pick(["\u5b57\u8282\u8df3\u52a88\u5468\u5e74\uff0c\u4e0d\u5fd8\u521d\u5fc3\uff0cAlways Day1","\u54c8\u54c8\u54c8\u6d4b\u8bd5\u6d4b\u8bd5","\u82df\u5229\u56fd\u5bb6\u751f\u6b7b\u4ee5\uff0c\u5c82\u56e0\u7978\u798f\u907f\u8d8b\u4e4b"]),"tagList|1":["@tags"],"likes|100-10000":1e4,"comments|100-10000":1e4}]}),a.a.mock(o,{"liveList|5":[{"id|+1":n.Random.increment(),"author|1":["\u5b57\u8282\u541b","\u86e4\u86e4\u86e4","\u8086\u65e0\u5fcc\u60ee","\u6469\u5929\u5927\u697c","\u521d\u5b66\u8005"],"url|1":n.Random.pick(["//sf1-hscdn-tos.pstatp.com/obj/media-fe/xgplayer_doc_video/hls/xgplayer-demo.m3u8"]),"description|1":n.Random.pick(["\u5b57\u8282\u8df3\u52a88\u5468\u5e74\uff0c\u4e0d\u5fd8\u521d\u5fc3\uff0cAlways Day1","\u54c8\u54c8\u54c8\u6d4b\u8bd5\u6d4b\u8bd5","\u82df\u5229\u56fd\u5bb6\u751f\u6b7b\u4ee5\uff0c\u5c82\u56e0\u7978\u798f\u907f\u8d8b\u4e4b"]),"tagList|1":["@tags"],"likes|100-10000":1e4,"comments|100-10000":1e4}]})},69:function(e,t,i){},78:function(e,t,i){},80:function(e,t,i){},81:function(e,t,i){"use strict";i.r(t);var n=i(1),a=i(0),c=i.n(a),o=i(39),r=i.n(o),s=(i(48),i(18)),l=i(3),d=i(19),u=i.n(d),p=i(23),v=i(42),h=i(5),j=i(6),m=i(8),b=i(7),y=i(22),O=i.n(y);O.a.defaults.baseURL="http://localhost:3000",i(68),O.a.interceptors.request.use((function(e){return e}),(function(e){return Promise.reject(e)})),O.a.interceptors.response.use((function(e){return e}),(function(e){return Promise.reject(e)}));var _=O.a,f=i(9),x=i.n(f),g=i(27),k=i.n(g),P=i(40),N=i.n(P),w=(i(69),i(24)),L=i.n(w),V=function(e){Object(m.a)(i,e);var t=Object(b.a)(i);function i(){var e;Object(h.a)(this,i);for(var n=arguments.length,a=new Array(n),c=0;c<n;c++)a[c]=arguments[c];return(e=t.call.apply(t,[this].concat(a))).player=void 0,e}return Object(j.a)(i,[{key:"initPlayer",value:function(){var e=this.props,t=e.type,i=e.id,n=e.url;"video"===t?this.player=new k.a({id:"".concat(t).concat(i),width:window.innerWidth,height:window.innerHeight,url:n,autoplay:!0,videoInit:!0,"x5-video-player-type":"h5",playsinline:!1,loop:!0,closeVideoStopPropagation:!0,closePlayVideoFocus:!0,ignores:["time","definition","error","fullscreen","i18n","pc","play","replay","volume"]}):"live"===t&&(this.player=new N.a({id:i,width:window.innerWidth,height:window.innerHeight,url:n,autoplay:!0,videoInit:!0,controls:!1,"x5-video-player-type":"h5",playsinline:!1,closeVideoStopPropagation:!0,closePlayVideoFocus:!0,ignores:["time","definition","error","fullscreen","i18n","loading","mobile","pc","play","poster","progress","replay","volume"]})),console.log("[".concat(i,"] Player inited."),this.player)}},{key:"componentDidMount",value:function(){this.props.active&&this.initPlayer()}},{key:"componentDidUpdate",value:function(){var e=this.props,t=e.id,i=e.active;console.log("[".concat(t,"] Player updated."),this.player,i),i?this.player||this.initPlayer():this.player&&(this.player.destroy(),delete this.player,console.log("[".concat(t,"] Player destroyed."),this.player))}},{key:"render",value:function(){var e=this.props,t=e.id,i=e.type;return Object(n.jsx)("div",{className:L()("player",{"player-video":"video"===i,"player-live":"live"===i}),children:Object(n.jsx)("div",{id:"".concat(i).concat(t)})})}}]),i}(c.a.Component),S=function(e){Object(m.a)(i,e);var t=Object(b.a)(i);function i(){return Object(h.a)(this,i),t.apply(this,arguments)}return Object(j.a)(i,[{key:"render",value:function(){var e=this.props.video,t=e.id,i=e.url,a=e.author,c=e.description,o=e.tagList,r=e.likes,s=e.comments,l=this.props.active;return Object(n.jsxs)("div",{className:L()(x.a.video,{"video-avtice":l}),children:[Object(n.jsx)(V,{id:t.toString(),url:i,type:"video",active:l}),Object(n.jsxs)("div",{className:x.a.info,children:[Object(n.jsxs)("div",{className:x.a.author,children:["@",a]}),Object(n.jsx)("div",{className:x.a.description,children:c}),Object(n.jsx)("div",{className:x.a.tags,children:o&&o.map((function(e){return Object(n.jsxs)("span",{className:x.a.tag,children:["#",e]},e)}))})]}),Object(n.jsxs)("div",{className:x.a.action,children:[Object(n.jsxs)("div",{className:x.a.like,children:[Object(n.jsx)("div",{className:x.a["like-icon"]}),Object(n.jsx)("div",{className:x.a["like-number"],children:r})]}),Object(n.jsxs)("div",{className:x.a.comment,children:[Object(n.jsx)("div",{className:x.a["comment-icon"]}),Object(n.jsx)("div",{className:x.a["comment-number"],children:s})]})]})]})}}]),i}(c.a.Component),C=i(15),T=i.n(C),I=function(e){Object(m.a)(i,e);var t=Object(b.a)(i);function i(){return Object(h.a)(this,i),t.apply(this,arguments)}return Object(j.a)(i,[{key:"render",value:function(){return Object(n.jsxs)("div",{className:T.a.top,children:[Object(n.jsx)("div",{className:T.a.left,children:Object(n.jsx)(s.b,{to:"/live",children:Object(n.jsx)("div",{className:"live-btn",children:"\u76f4\u64ad"})})}),Object(n.jsx)("div",{className:T.a.middle,children:Object(n.jsxs)("div",{className:T.a.navbar,children:[Object(n.jsx)("div",{className:T.a["navbar-item"],children:"\u540c\u57ce"}),Object(n.jsx)("div",{className:T.a["navbar-item"],children:"\u5173\u6ce8"}),Object(n.jsx)("div",{className:"".concat(T.a["navbar-item"]," ").concat(T.a["navbar-item-active"]),children:"\u63a8\u8350"})]})}),Object(n.jsx)("div",{className:T.a.right,children:Object(n.jsx)("div",{className:T.a["search-btn"]})})]})}}]),i}(c.a.Component),M=(i(78),i(84)),F=i(83),R=(i(79),function(e){Object(m.a)(i,e);var t=Object(b.a)(i);function i(e){var n;return Object(h.a)(this,i),(n=t.call(this,e)).handleSwiperChange=function(e){console.log(e);var t=n.state,i=t.videoList,a=t.inPageVideoList,c=e.activeIndex;c===a.length-1&&c<i.length-1&&(console.log("added"),n.setState({inPageVideoList:[].concat(Object(v.a)(a),[i[c+1]])}),e.update()),console.log("Active swiper:",c),n.setState({activeIndex:c})},n.state={videoList:[],inPageVideoList:[],activeIndex:0},n}return Object(j.a)(i,[{key:"componentDidMount",value:function(){var e=Object(p.a)(u.a.mark((function e(){var t,i;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,_.get("/getVideoList");case 3:t=e.sent,i=t.data.videoList,this.setState({videoList:i}),this.setState({inPageVideoList:i.slice(0,2)}),console.log(this.state),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),console.log(e.t0);case 13:case"end":return e.stop()}}),e,this,[[0,10]])})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this,t=this.state,i=t.inPageVideoList,a=t.activeIndex;return Object(n.jsxs)("div",{className:"home",children:[Object(n.jsx)(I,{}),i&&i.length&&Object(n.jsx)(M.a,{spaceBetween:0,slidesPerView:1,direction:"vertical",onSlideChange:function(t){return e.handleSwiperChange(t)},height:window.innerHeight,autoHeight:!0,children:i.map((function(e,t){return Object(n.jsx)(F.a,{children:Object(n.jsx)(S,{video:e,active:a===t})},e.id)}))})]})}}]),i}(c.a.Component)),D=(i(80),i(20)),J=i.n(D),H=function(e){Object(m.a)(i,e);var t=Object(b.a)(i);function i(){return Object(h.a)(this,i),t.apply(this,arguments)}return Object(j.a)(i,[{key:"render",value:function(){return Object(n.jsxs)("div",{className:J.a.top,children:[Object(n.jsx)("div",{className:J.a.left}),Object(n.jsx)("div",{className:J.a.middle}),Object(n.jsx)("div",{className:J.a.right,children:Object(n.jsx)(s.b,{to:"/",children:Object(n.jsx)("div",{className:J.a["close-btn"]})})})]})}}]),i}(c.a.Component),A=function(e){Object(m.a)(i,e);var t=Object(b.a)(i);function i(){return Object(h.a)(this,i),t.apply(this,arguments)}return Object(j.a)(i,[{key:"render",value:function(){var e=this.props.video,t=e.id,i=e.url;return Object(n.jsxs)("div",{className:"live",children:[Object(n.jsx)(H,{}),Object(n.jsx)(V,{id:t.toString(),url:i,type:"live"})]})}}]),i}(c.a.Component),B=function(e){Object(m.a)(i,e);var t=Object(b.a)(i);function i(e){var n;return Object(h.a)(this,i),(n=t.call(this,e)).state={liveList:[]},n}return Object(j.a)(i,[{key:"componentDidMount",value:function(){var e=Object(p.a)(u.a.mark((function e(){var t;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,_.get("/getLiveList");case 3:t=e.sent,console.log(t),this.setState({liveList:t.data.liveList}),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.log(e.t0);case 11:case"end":return e.stop()}}),e,this,[[0,8]])})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this.state.liveList[0];return Object(n.jsx)("div",{className:"live",children:e&&Object(n.jsx)(A,{video:e})})}}]),i}(c.a.Component);function U(){return Object(n.jsx)(s.a,{children:Object(n.jsx)("div",{children:Object(n.jsxs)(l.c,{children:[Object(n.jsx)(l.a,{exact:!0,path:"/",component:R}),Object(n.jsx)(l.a,{path:"/live",component:B})]})})})}var W=function(e){e&&e instanceof Function&&i.e(3).then(i.bind(null,85)).then((function(t){var i=t.getCLS,n=t.getFID,a=t.getFCP,c=t.getLCP,o=t.getTTFB;i(e),n(e),a(e),c(e),o(e)}))};r.a.render(Object(n.jsx)(c.a.StrictMode,{children:Object(n.jsx)(U,{})}),document.getElementById("root")),W()},9:function(e,t,i){e.exports={video:"VideoPlayer_video__1x-26",info:"VideoPlayer_info__p_zeF",author:"VideoPlayer_author__2x-K0",description:"VideoPlayer_description__2OJV5",tags:"VideoPlayer_tags__32zlE",tag:"VideoPlayer_tag__2jhPO",action:"VideoPlayer_action__2CI0w",like:"VideoPlayer_like__IG_uM",comment:"VideoPlayer_comment__se77N","like-icon":"VideoPlayer_like-icon__37QMd","comment-icon":"VideoPlayer_comment-icon__2VFvh","like-number":"VideoPlayer_like-number__1cJSx","comment-number":"VideoPlayer_comment-number__K0paH"}}},[[81,1,2]]]);
//# sourceMappingURL=main.42790de3.chunk.js.map